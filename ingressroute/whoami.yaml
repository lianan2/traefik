apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: whoami-ingressroute
  namespace: apps
spec:
  entryPoints:
    - http  # http or https
  routes:
    # whoami服务的路由规则
    - match: Host(`vm.apps.com`) && PathPrefix(`/test/`)
      kind: Rule
      services:
        - name: whoami-svc
          port: 80
      middlewares:
        - name: authentication-middleware  # 使用鉴权中间件
